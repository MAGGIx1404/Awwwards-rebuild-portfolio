(()=>{"use strict";var e,t={193:(e,t,n)=>{var i=n(716),r=n(317),o=n(212),s=n(498);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbacks={},this.callbacks.base={}}var t,n,i;return t=e,(n=[{key:"on",value:function(e,t){var n=this;return void 0===e||""===e?(console.warn("wrong names"),!1):void 0===t?(console.warn("wrong callback"),!1):(this.resolveNames(e).forEach((function(e){var i=n.resolveName(e);n.callbacks[i.namespace]instanceof Object||(n.callbacks[i.namespace]={}),n.callbacks[i.namespace][i.value]instanceof Array||(n.callbacks[i.namespace][i.value]=[]),n.callbacks[i.namespace][i.value].push(t)})),this)}},{key:"off",value:function(e){var t=this;return void 0===e||""===e?(console.warn("wrong name"),!1):(this.resolveNames(e).forEach((function(e){var n=t.resolveName(e);if("base"!==n.namespace&&""===n.value)delete t.callbacks[n.namespace];else if("base"===n.namespace)for(var i in t.callbacks)t.callbacks[i]instanceof Object&&t.callbacks[i][n.value]instanceof Array&&(delete t.callbacks[i][n.value],0===Object.keys(t.callbacks[i]).length&&delete t.callbacks[i]);else t.callbacks[n.namespace]instanceof Object&&t.callbacks[n.namespace][n.value]instanceof Array&&(delete t.callbacks[n.namespace][n.value],0===Object.keys(t.callbacks[n.namespace]).length&&delete t.callbacks[n.namespace])})),this)}},{key:"trigger",value:function(e,t){if(void 0===e||""===e)return console.warn("wrong name"),!1;var n=this,i=null,r=null,o=t instanceof Array?t:[],s=this.resolveNames(e);if("base"===(s=this.resolveName(s[0])).namespace)for(var a in n.callbacks)n.callbacks[a]instanceof Object&&n.callbacks[a][s.value]instanceof Array&&n.callbacks[a][s.value].forEach((function(e){r=e.apply(n,o),void 0===i&&(i=r)}));else if(this.callbacks[s.namespace]instanceof Object){if(""===s.value)return console.warn("wrong name"),this;n.callbacks[s.namespace][s.value].forEach((function(e){r=e.apply(n,o),void 0===i&&(i=r)}))}return i}},{key:"resolveNames",value:function(e){var t=e;return t=(t=(t=t.replace(/[^a-zA-Z0-9 ,/.]/g,"")).replace(/[,/]+/g," ")).split(" ")}},{key:"resolveName",value:function(e){var t={},n=e.split(".");return t.original=e,t.value=n[0],t.namespace="base",n.length>1&&""!==n[1]&&(t.namespace=n[1]),t}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=p(e);if(t){var r=p(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&f(e,t)}(o,e);var t,n,i,r=h(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).start=Date.now(),e.current=e.start,e.elapsed=0,e.delta=16,e.playing=!0,e.tick=e.tick.bind(g(e)),e.tick(),e}return t=o,(n=[{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1}},{key:"tick",value:function(){this.ticker=window.requestAnimationFrame(this.tick);var e=Date.now();this.delta=e-this.current,this.elapsed+=this.playing?this.delta:0,this.current=e,this.delta>60&&(this.delta=60),this.playing&&this.trigger("tick")}},{key:"stop",value:function(){window.cancelAnimationFrame(this.ticker)}}])&&u(t.prototype,n),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(c);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=z(e);if(t){var r=z(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return x(this,n)}}function x(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&b(e,t)}(o,e);var t,n,i,r=w(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).viewport={},e.$sizeViewport=document.createElement("div"),e.$sizeViewport.style.width="100vw",e.$sizeViewport.style.height="100vh",e.$sizeViewport.style.position="absolute",e.$sizeViewport.style.top=0,e.$sizeViewport.style.left=0,e.$sizeViewport.style.pointerEvents="none",e.resize=e.resize.bind(P(e)),window.addEventListener("resize",e.resize),e.resize(),e}return t=o,(n=[{key:"resize",value:function(){document.body.appendChild(this.$sizeViewport),this.viewport.width=this.$sizeViewport.offsetWidth,this.viewport.height=this.$sizeViewport.offsetHeight,document.body.removeChild(this.$sizeViewport),this.width=window.innerWidth,this.height=window.innerHeight,this.trigger("resize")}}])&&y(t.prototype,n),i&&y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(c),_=n(466),k=n.n(_);function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=new(k()),this.instance.showPanel(3),this.active=!1,this.max=40,this.ignoreMaxed=!0,t&&this.activate()}var t,n,i;return t=e,(n=[{key:"activate",value:function(){this.active=!0,document.body.appendChild(this.instance.dom)}},{key:"deactivate",value:function(){this.active=!1,document.body.removeChild(this.instance.dom)}},{key:"setRenderPanel",value:function(e){this.render={},this.render.context=e,this.render.extension=this.render.context.getExtension("EXT_disjoint_timer_query_webgl2"),this.render.panel=this.instance.addPanel(new(k().Panel)("Render (ms)","#f8f","#212")),"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext&&this.render.extension||this.deactivate()}},{key:"beforeRender",value:function(){if(this.active){this.queryCreated=!1;var e=!1;if(this.render.query){e=this.render.context.getQueryParameter(this.render.query,this.render.context.QUERY_RESULT_AVAILABLE);var t=this.render.context.getParameter(this.render.extension.GPU_DISJOINT_EXT);if(e&&!t){var n=this.render.context.getQueryParameter(this.render.query,this.render.context.QUERY_RESULT),i=Math.min(n/1e3/1e3,this.max);i===this.max&&this.ignoreMaxed||this.render.panel.update(i,this.max)}}!e&&this.render.query||(this.queryCreated=!0,this.render.query=this.render.context.createQuery(),this.render.context.beginQuery(this.render.extension.TIME_ELAPSED_EXT,this.render.query))}}},{key:"afterRender",value:function(){this.active&&this.queryCreated&&this.render.context.endQuery(this.render.extension.TIME_ELAPSED_EXT)}},{key:"update",value:function(){this.active&&this.instance.update()}},{key:"destroy",value:function(){this.deactivate()}}])&&O(t.prototype,n),i&&O(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),C=n(217),j=n(86),F=n(854),T=n(666),I=n(727);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=N(e);if(t){var r=N(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return q(this,n)}}function q(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&R(e,t)}(o,e);var t,n,i,r=B(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).experience=new Pe,e.renderer=e.experience.renderer.instance,e.setLoaders(),e.toLoad=0,e.loaded=0,e.items={},e}return t=o,n=[{key:"setLoaders",value:function(){var e=this;this.loaders=[],this.loaders.push({extensions:["jpg","png"],action:function(t){var n=new Image;n.addEventListener("load",(function(){e.fileLoadEnd(t,n)})),n.addEventListener("error",(function(){e.fileLoadEnd(t,n)})),n.src=t.source}});var t=new I.g;t.setTranscoderPath("basis/"),t.detectSupport(this.renderer),this.loaders.push({extensions:["basis"],action:function(n){t.load(n.source,(function(t){e.fileLoadEnd(n,t)}))}});var n=new F._;n.setDecoderPath("draco/"),n.setDecoderConfig({type:"js"}),this.loaders.push({extensions:["drc"],action:function(t){n.load(t.source,(function(n){e.fileLoadEnd(t,n),F._.releaseDecoderModule()}))}});var i=new C.E;i.setDRACOLoader(n),this.loaders.push({extensions:["glb","gltf"],action:function(t){i.load(t.source,(function(n){e.fileLoadEnd(t,n)}))}});var r=new j.y;this.loaders.push({extensions:["fbx"],action:function(t){r.load(t.source,(function(n){e.fileLoadEnd(t,n)}))}});var o=new T.x;this.loaders.push({extensions:["hdr"],action:function(t){o.load(t.source,(function(n){e.fileLoadEnd(t,n)}))}})}},{key:"load",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=D(n);try{for(i.s();!(e=i.n()).done;){var r=e.value;this.toLoad++;var o=r.source.match(/\.([a-z]+)$/);void 0!==o[1]?function(){var e=o[1],n=t.loaders.find((function(t){return t.extensions.find((function(t){return t===e}))}));n?n.action(r):console.warn("Cannot found loader for ".concat(r))}():console.warn("Cannot found extension of ".concat(r))}}catch(e){i.e(e)}finally{i.f()}}},{key:"fileLoadEnd",value:function(e,t){this.loaded++,this.items[e.name]=t,this.trigger("fileEnd",[e,t]),this.loaded===this.toLoad&&this.trigger("end")}}],n&&A(t.prototype,n),i&&A(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(c);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function $(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function X(e,t){return X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},X(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=H(e);if(t){var r=H(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Z(this,n)}}function Z(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&X(e,t)}(s,e);var t,n,i,r=Y(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=r.call(this)).items={},t.loader=new V({renderer:t.renderer}),t.groups={},t.groups.assets=$(e),t.groups.loaded=[],t.groups.current=null,t.loadNextGroup(),t.loader.on("fileEnd",(function(e,n){var i=n;"texture"===e.type&&(i instanceof o.xEZ||(i=new o.xEZ(n)),i.needsUpdate=!0),t.items[e.name]=i,t.groups.current.loaded++,t.trigger("progress",[t.groups.current,e,i])})),t.loader.on("end",(function(){t.groups.loaded.push(t.groups.current),t.trigger("groupEnd",[t.groups.current]),t.groups.assets.length>0?t.loadNextGroup():t.trigger("end")})),t}return t=s,n=[{key:"loadNextGroup",value:function(){this.groups.current=this.groups.assets.shift(),this.groups.current.toLoad=this.groups.current.items.length,this.groups.current.loaded=0,this.loader.load(this.groups.current.items)}},{key:"createInstancedMeshes",value:function(e,t){var n,i=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=G(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;i.push({name:o.name,regex:o.regex,meshesGroups:[],instancedMeshes:[]})}}catch(e){r.e(e)}finally{r.f()}for(var s={},a=0,c=i;a<c.length;a++){var l=c[a];s[l.name]=l.instancedMeshes}return s}},{key:"destroy",value:function(){for(var e in this.items){var t=this.items[e];t instanceof o.xEZ&&t.dispose()}}}],n&&W(t.prototype,n),i&&W(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(c),J=n(108),ee=n(458),te=n(484);function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var re=function(){function e(){ne(this,e),this.experience=new Pe,this.config=this.experience.config,this.debug=this.experience.debug,this.stats=this.experience.stats,this.time=this.experience.time,this.sizes=this.experience.sizes,this.scene=this.experience.scene,this.camera=this.experience.camera,this.usePostprocess=!0,this.debug&&(this.debugFolder=this.debug.addFolder({title:"renderer"})),this.setInstance(),this.setPostProcess()}var t,n,i;return t=e,(n=[{key:"setInstance",value:function(){this.clearColor="#010101",this.instance=new o.CP7({alpha:!1,antialias:!0}),this.instance.domElement.style.position="absolute",this.instance.domElement.style.top=0,this.instance.domElement.style.left=0,this.instance.domElement.style.width="100%",this.instance.domElement.style.height="100%",this.instance.setClearColor(this.clearColor,1),this.instance.setSize(this.config.width,this.config.height),this.instance.setPixelRatio(this.config.pixelRatio),this.context=this.instance.getContext(),this.stats&&this.stats.setRenderPanel(this.context)}},{key:"setPostProcess",value:function(){var e=this;if(this.postProcess={},this.postProcess.renderPass=new ee.C(this.scene,this.camera.instance),this.postProcess.unrealBloomPass=new te.m(new o.FM8(this.sizes.width,this.sizes.height),.8,.315,0),this.postProcess.unrealBloomPass.enabled=!0,this.postProcess.unrealBloomPass.tintColor={},this.postProcess.unrealBloomPass.tintColor.value="#000",this.postProcess.unrealBloomPass.tintColor.instance=new o.Ilk(this.postProcess.unrealBloomPass.tintColor.value),this.postProcess.unrealBloomPass.compositeMaterial.uniforms.uTintColor={value:this.postProcess.unrealBloomPass.tintColor.instance},this.postProcess.unrealBloomPass.compositeMaterial.uniforms.uTintStrength={value:.15},this.postProcess.unrealBloomPass.compositeMaterial.fragmentShader="\nvarying vec2 vUv;\nuniform sampler2D blurTexture1;\nuniform sampler2D blurTexture2;\nuniform sampler2D blurTexture3;\nuniform sampler2D blurTexture4;\nuniform sampler2D blurTexture5;\nuniform sampler2D dirtTexture;\nuniform float bloomStrength;\nuniform float bloomRadius;\nuniform float bloomFactors[NUM_MIPS];\nuniform vec3 bloomTintColors[NUM_MIPS];\nuniform vec3 uTintColor;\nuniform float uTintStrength;\n\nfloat lerpBloomFactor(const in float factor) {\n    float mirrorFactor = 1.2 - factor;\n    return mix(factor, mirrorFactor, bloomRadius);\n}\n\nvoid main() {\n    vec4 color = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n        lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n        lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n        lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n        lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\n    color.rgb = mix(color.rgb, uTintColor, uTintStrength);\n    gl_FragColor = color;\n}\n        ",this.debug){var t=this.debugFolder.addFolder({title:"UnrealBloomPass"});t.addInput(this.postProcess.unrealBloomPass,"enabled",{}),t.addInput(this.postProcess.unrealBloomPass,"strength",{min:0,max:3,step:.001}),t.addInput(this.postProcess.unrealBloomPass,"radius",{min:0,max:1,step:.001}),t.addInput(this.postProcess.unrealBloomPass,"threshold",{min:0,max:1,step:.001}),t.addInput(this.postProcess.unrealBloomPass.tintColor,"value",{view:"uTintColor",label:"color"}).on("change",(function(){e.postProcess.unrealBloomPass.tintColor.instance.set(e.postProcess.unrealBloomPass.tintColor.value)})),t.addInput(this.postProcess.unrealBloomPass.compositeMaterial.uniforms.uTintStrength,"value",{label:"uTintStrength",min:0,max:1,step:.001})}var n=this.config.pixelRatio>=2?o.dd2:o.p7A;this.renderTarget=new n(this.config.width,this.config.height,{generateMipmaps:!1,minFilter:o.wem,magFilter:o.wem,format:o.UCm,encoding:o.knz}),this.postProcess.composer=new J.xC(this.instance,this.renderTarget),this.postProcess.composer.setSize(this.config.width,this.config.height),this.postProcess.composer.setPixelRatio(this.config.pixelRatio),this.postProcess.composer.addPass(this.postProcess.renderPass),this.postProcess.composer.addPass(this.postProcess.unrealBloomPass)}},{key:"resize",value:function(){this.instance.setSize(this.config.width,this.config.height),this.instance.setPixelRatio(this.config.pixelRatio),this.postProcess.composer.setSize(this.config.width,this.config.height),this.postProcess.composer.setPixelRatio(this.config.pixelRatio)}},{key:"update",value:function(){this.stats&&this.stats.beforeRender(),this.usePostprocess?this.postProcess.composer.render():this.instance.render(this.scene,this.camera.instance),this.stats&&this.stats.afterRender()}},{key:"destroy",value:function(){this.instance.renderLists.dispose(),this.instance.dispose(),this.renderTarget.dispose(),this.postProcess.composer.renderTarget1.dispose(),this.postProcess.composer.renderTarget2.dispose()}}])&&ie(t.prototype,n),i&&ie(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),oe=n(365);function se(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ae=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new Pe,this.config=this.experience.config,this.debug=this.experience.debug,this.time=this.experience.time,this.sizes=this.experience.sizes,this.targetElement=this.experience.targetElement,this.scene=this.experience.scene,this.mode="debug",this.setInstance(),this.setModes()}var t,n,i;return t=e,(n=[{key:"setInstance",value:function(){this.instance=new o.cPb(25,this.config.width/this.config.height,.1,15),this.instance.rotation.reorder("YXZ"),this.scene.add(this.instance)}},{key:"setModes",value:function(){this.modes={},this.modes.default={},this.modes.default.instance=this.instance.clone(),this.modes.default.instance.rotation.reorder("YXZ"),this.modes.debug={},this.modes.debug.instance=this.instance.clone(),this.modes.debug.instance.rotation.reorder("YXZ"),this.modes.debug.instance.position.set(0,0,7),this.modes.debug.orbitControls=new oe.z(this.modes.debug.instance,this.targetElement),this.modes.debug.orbitControls.enabled=this.modes.debug.active,this.modes.debug.orbitControls.screenSpacePanning=!0,this.modes.debug.orbitControls.enableKeys=!1,this.modes.debug.orbitControls.zoomSpeed=.25,this.modes.debug.orbitControls.enableDamping=!0,this.modes.debug.orbitControls.update()}},{key:"resize",value:function(){this.instance.aspect=this.config.width/this.config.height,this.instance.updateProjectionMatrix(),this.modes.default.instance.aspect=this.config.width/this.config.height,this.modes.default.instance.updateProjectionMatrix(),this.modes.debug.instance.aspect=this.config.width/this.config.height,this.modes.debug.instance.updateProjectionMatrix()}},{key:"update",value:function(){this.modes.debug.orbitControls.update(),this.instance.position.copy(this.modes[this.mode].instance.position),this.instance.quaternion.copy(this.modes[this.mode].instance.quaternion),this.instance.updateMatrixWorld()}},{key:"destroy",value:function(){this.modes.debug.orbitControls.destroy()}}])&&se(t.prototype,n),i&&se(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var le=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new Pe,this.debug=this.experience.debug,this.scene=this.experience.scene,this.time=this.experience.time,this.microphone=this.experience.microphone,this.timeFrequency=3e-4,this.elapsedTime=0,this.debug&&(this.debugFolder=this.debug.addFolder({title:"sphere",expanded:!0}),this.debugFolder.addInput(this,"timeFrequency",{min:0,max:.001,step:1e-6})),this.setVariations(),this.setGeometry(),this.setLights(),this.setOffset(),this.setMaterial(),this.setMesh()}var t,n,i;return t=e,(n=[{key:"setVariations",value:function(){var e=this;this.variations={},this.variations.volume={},this.variations.volume.target=0,this.variations.volume.current=0,this.variations.volume.upEasing=.03,this.variations.volume.downEasing=.002,this.variations.volume.getValue=function(){var t=e.microphone.levels[0]||0,n=e.microphone.levels[1]||0,i=e.microphone.levels[2]||0;return.3*Math.max(t,n,i)},this.variations.volume.getDefault=function(){return.152},this.variations.lowLevel={},this.variations.lowLevel.target=0,this.variations.lowLevel.current=0,this.variations.lowLevel.upEasing=.005,this.variations.lowLevel.downEasing=.002,this.variations.lowLevel.getValue=function(){var t=e.microphone.levels[0]||0;return t*=.003,t+=1e-4,t=Math.max(0,t)},this.variations.lowLevel.getDefault=function(){return 3e-4},this.variations.mediumLevel={},this.variations.mediumLevel.target=0,this.variations.mediumLevel.current=0,this.variations.mediumLevel.upEasing=.008,this.variations.mediumLevel.downEasing=.004,this.variations.mediumLevel.getValue=function(){var t=e.microphone.levels[1]||0;return t*=2,t+=3.587,t=Math.max(3.587,t)},this.variations.mediumLevel.getDefault=function(){return 3.587},this.variations.highLevel={},this.variations.highLevel.target=0,this.variations.highLevel.current=0,this.variations.highLevel.upEasing=.02,this.variations.highLevel.downEasing=.001,this.variations.highLevel.getValue=function(){var t=e.microphone.levels[2]||0;return t*=5,t+=.5,t=Math.max(.5,t)},this.variations.highLevel.getDefault=function(){return.65}}},{key:"setLights",value:function(){var e=this;if(this.lights={},this.lights.a={},this.lights.a.intensity=1.85,this.lights.a.color={},this.lights.a.color.value="#ff3e00",this.lights.a.color.instance=new o.Ilk(this.lights.a.color.value),this.lights.a.spherical=new o.$V(1,.615,2.049),this.lights.b={},this.lights.b.intensity=1.4,this.lights.b.color={},this.lights.b.color.value="#0063ff",this.lights.b.color.instance=new o.Ilk(this.lights.b.color.value),this.lights.b.spherical=new o.$V(1,2.561,-1.844),this.debug){var t=function(t){var n=e.lights[t],i=e.debugFolder.addFolder({title:t,expanded:!0});i.addInput(n.color,"value",{view:"color",label:"color"}).on("change",(function(){n.color.instance.set(n.color.value)})),i.addInput(n,"intensity",{min:0,max:10}).on("change",(function(){e.material.uniforms["uLight".concat(t.toUpperCase(),"Intensity")].value=n.intensity})),i.addInput(n.spherical,"phi",{label:"phi",min:0,max:Math.PI,step:.001}).on("change",(function(){e.material.uniforms["uLight".concat(t.toUpperCase(),"Position")].value.setFromSpherical(n.spherical)})),i.addInput(n.spherical,"theta",{label:"theta",min:-Math.PI,max:Math.PI,step:.001}).on("change",(function(){e.material.uniforms.uLightAPosition.value.setFromSpherical(n.spherical)}))};for(var n in this.lights)t(n)}}},{key:"setOffset",value:function(){this.offset={},this.offset.spherical=new o.$V(1,Math.random()*Math.PI,Math.random()*Math.PI*2),this.offset.direction=new o.Pa4,this.offset.direction.setFromSpherical(this.offset.spherical)}},{key:"setGeometry",value:function(){this.geometry=new o.xo$(1,512,512),this.geometry.computeTangents()}},{key:"setMaterial",value:function(){this.material=new o.jyz({uniforms:{uLightAColor:{value:this.lights.a.color.instance},uLightAPosition:{value:new o.Pa4(1,1,0)},uLightAIntensity:{value:this.lights.a.intensity},uLightBColor:{value:this.lights.b.color.instance},uLightBPosition:{value:new o.Pa4(-1,-1,0)},uLightBIntensity:{value:this.lights.b.intensity},uSubdivision:{value:new o.FM8(this.geometry.parameters.widthSegments,this.geometry.parameters.heightSegments)},uOffset:{value:new o.Pa4},uDistortionFrequency:{value:1.5},uDistortionStrength:{value:.65},uDisplacementFrequency:{value:2.12},uDisplacementStrength:{value:.152},uFresnelOffset:{value:-1.609},uFresnelMultiplier:{value:3.587},uFresnelPower:{value:1.793},uTime:{value:0}},defines:{USE_TANGENT:""},vertexShader:"#define GLSLIFY 1\n#define M_PI 3.1415926535897932384626433832795\n\nuniform vec3 uLightAColor;\nuniform vec3 uLightAPosition;\nuniform float uLightAIntensity;\nuniform vec3 uLightBColor;\nuniform vec3 uLightBPosition;\nuniform float uLightBIntensity;\n\nuniform vec2 uSubdivision;\n\nuniform vec3 uOffset;\n\nuniform float uDistortionFrequency;\nuniform float uDistortionStrength;\nuniform float uDisplacementFrequency;\nuniform float uDisplacementStrength;\n\nuniform float uFresnelOffset;\nuniform float uFresnelMultiplier;\nuniform float uFresnelPower;\n\nuniform float uTime;\n\nvarying vec3 vColor;\n\n//\tClassic Perlin 3D Noise \n//\tby Stefan Gustavson\n//\nvec4 permute_0(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt_0(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nvec4 fade_0(vec4 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n\nfloat perlin4d(vec4 P){\n  vec4 Pi0 = floor(P); // Integer part for indexing\n  vec4 Pi1 = Pi0 + 1.0; // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute_0(permute_0(ix) + iy);\n  vec4 ixy0 = permute_0(ixy + iz0);\n  vec4 ixy1 = permute_0(ixy + iz1);\n  vec4 ixy00 = permute_0(ixy0 + iw0);\n  vec4 ixy01 = permute_0(ixy0 + iw1);\n  vec4 ixy10 = permute_0(ixy1 + iw0);\n  vec4 ixy11 = permute_0(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 / 7.0;\n  vec4 gy00 = floor(gx00) / 7.0;\n  vec4 gz00 = floor(gy00) / 6.0;\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 / 7.0;\n  vec4 gy01 = floor(gx01) / 7.0;\n  vec4 gz01 = floor(gy01) / 6.0;\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 / 7.0;\n  vec4 gy10 = floor(gx10) / 7.0;\n  vec4 gz10 = floor(gy10) / 6.0;\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 / 7.0;\n  vec4 gy11 = floor(gx11) / 7.0;\n  vec4 gz11 = floor(gy11) / 6.0;\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt_0(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt_0(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt_0(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt_0(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade_0(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n\n//\tClassic Perlin 3D Noise \n//\tby Stefan Gustavson\n//\nvec4 permute_1(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt_1(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nvec3 fade_1(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n\nfloat perlin3d(vec3 P)\n{\n    vec3 Pi0 = floor(P); // Integer part for indexing\n    vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n    Pi0 = mod(Pi0, 289.0);\n    Pi1 = mod(Pi1, 289.0);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n\n    vec4 ixy = permute_1(permute_1(ix) + iy);\n    vec4 ixy0 = permute_1(ixy + iz0);\n    vec4 ixy1 = permute_1(ixy + iz1);\n\n    vec4 gx0 = ixy0 / 7.0;\n    vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n    vec4 gx1 = ixy1 / 7.0;\n    vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n    vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n    vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n    vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n    vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n    vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n    vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n    vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n    vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n    vec4 norm0 = taylorInvSqrt_1(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt_1(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n\n    vec3 fade_xyz = fade_1(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n    return 2.2 * n_xyz;\n}\n\nvec3 getDisplacedPosition(vec3 _position)\n{\n    vec3 distoredPosition = _position;\n    distoredPosition += perlin4d(vec4(distoredPosition * uDistortionFrequency + uOffset, uTime)) * uDistortionStrength;\n\n    float perlinStrength = perlin4d(vec4(distoredPosition * uDisplacementFrequency + uOffset, uTime));\n    \n    vec3 displacedPosition = _position;\n    displacedPosition += normalize(_position) * perlinStrength * uDisplacementStrength;\n\n    return displacedPosition;\n}\n\nvoid main()\n{\n    // Position\n    vec3 displacedPosition = getDisplacedPosition(position);\n    vec4 viewPosition = viewMatrix * vec4(displacedPosition, 1.0);\n    gl_Position = projectionMatrix * viewPosition;\n\n    // Bi tangents\n    float distanceA = (M_PI * 2.0) / uSubdivision.x;\n    float distanceB = M_PI / uSubdivision.x;\n\n    vec3 biTangent = cross(normal, tangent.xyz);\n\n    vec3 positionA = position + tangent.xyz * distanceA;\n    vec3 displacedPositionA = getDisplacedPosition(positionA);\n\n    vec3 positionB = position + biTangent.xyz * distanceB;\n    vec3 displacedPositionB = getDisplacedPosition(positionB);\n\n    vec3 computedNormal = cross(displacedPositionA - displacedPosition.xyz, displacedPositionB - displacedPosition.xyz);\n    computedNormal = normalize(computedNormal);\n\n    // Fresnel\n    vec3 viewDirection = normalize(displacedPosition.xyz - cameraPosition);\n    float fresnel = uFresnelOffset + (1.0 + dot(viewDirection, computedNormal)) * uFresnelMultiplier;\n    fresnel = pow(max(0.0, fresnel), uFresnelPower);\n\n    // Color\n    float lightAIntensity = max(0.0, - dot(computedNormal.xyz, normalize(- uLightAPosition))) * uLightAIntensity;\n    float lightBIntensity = max(0.0, - dot(computedNormal.xyz, normalize(- uLightBPosition))) * uLightBIntensity;\n\n    vec3 color = vec3(0.0);\n    color = mix(color, uLightAColor, lightAIntensity * fresnel);\n    color = mix(color, uLightBColor, lightBIntensity * fresnel);\n    color = mix(color, vec3(1.0), clamp(pow(max(0.0, fresnel - 0.8), 3.0), 0.0, 1.0));\n\n    // Varying\n    vColor = color;\n}",fragmentShader:"#define GLSLIFY 1\nvarying vec3 vColor;\n\nvoid main()\n{\n    gl_FragColor = vec4(vColor, 1.0);\n}"}),this.material.uniforms.uLightAPosition.value.setFromSpherical(this.lights.a.spherical),this.material.uniforms.uLightBPosition.value.setFromSpherical(this.lights.b.spherical),this.debug&&(this.debugFolder.addInput(this.material.uniforms.uDistortionFrequency,"value",{label:"uDistortionFrequency",min:0,max:10,step:.001}),this.debugFolder.addInput(this.material.uniforms.uDistortionStrength,"value",{label:"uDistortionStrength",min:0,max:10,step:.001}),this.debugFolder.addInput(this.material.uniforms.uDisplacementFrequency,"value",{label:"uDisplacementFrequency",min:0,max:5,step:.001}),this.debugFolder.addInput(this.material.uniforms.uDisplacementStrength,"value",{label:"uDisplacementStrength",min:0,max:1,step:.001}),this.debugFolder.addInput(this.material.uniforms.uFresnelOffset,"value",{label:"uFresnelOffset",min:-2,max:2,step:.001}),this.debugFolder.addInput(this.material.uniforms.uFresnelMultiplier,"value",{label:"uFresnelMultiplier",min:0,max:5,step:.001}),this.debugFolder.addInput(this.material.uniforms.uFresnelPower,"value",{label:"uFresnelPower",min:0,max:5,step:.001}))}},{key:"setMesh",value:function(){this.mesh=new o.Kj0(this.geometry,this.material),this.scene.add(this.mesh)}},{key:"update",value:function(){for(var e in this.variations){var t=this.variations[e];t.target=this.microphone.ready?t.getValue():t.getDefault();var n=t.target>t.current?t.upEasing:t.downEasing;t.current+=(t.target-t.current)*n*this.time.delta}this.timeFrequency=this.variations.lowLevel.current,this.elapsedTime=this.time.delta*this.timeFrequency,this.material.uniforms.uDisplacementStrength.value=this.variations.volume.current,this.material.uniforms.uDistortionStrength.value=this.variations.highLevel.current,this.material.uniforms.uFresnelMultiplier.value=this.variations.mediumLevel.current;var i=.3*this.elapsedTime;this.offset.spherical.phi=(Math.sin(.001*i)*Math.sin(.00321*i)*.5+.5)*Math.PI,this.offset.spherical.theta=(Math.sin(1e-4*i)*Math.sin(321e-6*i)*.5+.5)*Math.PI*2,this.offset.direction.setFromSpherical(this.offset.spherical),this.offset.direction.multiplyScalar(2*this.timeFrequency),this.material.uniforms.uOffset.value.add(this.offset.direction),this.material.uniforms.uTime.value+=this.elapsedTime}}])&&ce(t.prototype,n),i&&ce(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var fe=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new Pe,this.config=this.experience.config,this.scene=this.experience.scene,this.resources=this.experience.resources,this.resources.on("groupEnd",(function(e){"base"===e.name&&n.setSphere()}))}var t,n,i;return t=e,(n=[{key:"setSphere",value:function(){this.sphere=new le}},{key:"resize",value:function(){}},{key:"update",value:function(){this.sphere&&this.sphere.update()}},{key:"destroy",value:function(){}}])&&ue(t.prototype,n),i&&ue(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();const he=[{name:"base",data:{},items:[{name:"lennaTexture",source:"./src/images/photo.jpg",type:"texture"}]}];function de(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ge(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function pe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ve=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experience=new Pe,this.debug=this.experience.debug,this.ready=!1,this.volume=0,this.levels=[],navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){t.stream=e,t.init(),t.debug&&t.setSpectrum()}))}var t,n,i;return t=e,n=[{key:"init",value:function(){this.audioContext=new AudioContext,this.mediaStreamSourceNode=this.audioContext.createMediaStreamSource(this.stream),this.analyserNode=this.audioContext.createAnalyser(),this.analyserNode.fftSize=256,this.mediaStreamSourceNode.connect(this.analyserNode),this.floatTimeDomainData=new Float32Array(this.analyserNode.fftSize),this.byteFrequencyData=new Uint8Array(this.analyserNode.fftSize),this.ready=!0}},{key:"setSpectrum",value:function(){var e=this;this.spectrum={},this.spectrum.width=this.analyserNode.fftSize,this.spectrum.height=128,this.spectrum.halfHeight=Math.round(.5*this.spectrum.height),this.spectrum.canvas=document.createElement("canvas"),this.spectrum.canvas.width=this.spectrum.width,this.spectrum.canvas.height=this.spectrum.height,this.spectrum.canvas.style.position="fixed",this.spectrum.canvas.style.left=0,this.spectrum.canvas.style.bottom=0,document.body.append(this.spectrum.canvas),this.spectrum.context=this.spectrum.canvas.getContext("2d"),this.spectrum.context.fillStyle="#ffffff",this.spectrum.update=function(){e.spectrum.context.clearRect(0,0,e.spectrum.width,e.spectrum.height);for(var t=0;t<e.analyserNode.fftSize;t++){e.floatTimeDomainData[t];var n=e.byteFrequencyData[t]/255,i=t,r=e.spectrum.height-n*e.spectrum.height,o=n*e.spectrum.height;e.spectrum.context.fillRect(i,r,1,o)}}}},{key:"getLevels",value:function(){for(var e=this.analyserNode.fftSize,t=Math.floor(e/8),n=[],i=0,r=0;r<8;r++){for(var o=0,s=0;s<t;s++)o+=this.byteFrequencyData[r*t+s];var a=o/t/256;n[r]=a,a>i&&(i=a)}return n}},{key:"getVolume",value:function(){var e,t=0,n=de(this.floatTimeDomainData);try{for(n.s();!(e=n.n()).done;){var i=e.value;t+=i*i}}catch(e){n.e(e)}finally{n.f()}return Math.sqrt(t/this.floatTimeDomainData.length)}},{key:"update",value:function(){this.ready&&(this.analyserNode.getByteFrequencyData(this.byteFrequencyData),this.analyserNode.getFloatTimeDomainData(this.floatTimeDomainData),this.volume=this.getVolume(),this.levels=this.getLevels(),this.spectrum&&this.spectrum.update())}}],n&&pe(t.prototype,n),i&&pe(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var be,we,xe,Pe=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(me(this,e),e.instance)return e.instance;e.instance=this,this.targetElement=n.targetElement,this.targetElement?(this.time=new v,this.sizes=new S,this.setConfig(),this.setStats(),this.setDebug(),this.setScene(),this.setCamera(),this.setRenderer(),this.setResources(),this.setMicrohopne(),this.setWorld(),this.sizes.on("resize",(function(){t.resize()})),this.update()):console.warn("Missing 'targetElement' property")}var t,n,i;return t=e,(n=[{key:"setConfig",value:function(){this.config={},this.config.debug="#debug"===window.location.hash,this.config.pixelRatio=Math.min(Math.max(window.devicePixelRatio,1),2);var e=this.targetElement.getBoundingClientRect();this.config.width=e.width,this.config.height=e.height||window.innerHeight}},{key:"setStats",value:function(){this.config.debug&&(this.stats=new E(!0))}},{key:"setDebug",value:function(){this.config.debug&&(this.debug=new s.Pane,this.debug.containerElem_.style.width="320px")}},{key:"setScene",value:function(){this.scene=new o.xsS}},{key:"setCamera",value:function(){this.camera=new ae}},{key:"setRenderer",value:function(){this.renderer=new re({rendererInstance:this.rendererInstance}),this.targetElement.appendChild(this.renderer.instance.domElement)}},{key:"setResources",value:function(){this.resources=new K(he)}},{key:"setMicrohopne",value:function(){this.microphone=new ve}},{key:"setWorld",value:function(){this.world=new fe}},{key:"update",value:function(){var e=this;this.stats&&this.stats.update(),this.camera.update(),this.microphone&&this.microphone.update(),this.world&&this.world.update(),this.renderer&&this.renderer.update(),window.requestAnimationFrame((function(){e.update()}))}},{key:"resize",value:function(){var e=this.targetElement.getBoundingClientRect();this.config.width=e.width,this.config.height=e.height,this.config.pixelRatio=Math.min(Math.max(window.devicePixelRatio,1),2),this.camera&&this.camera.resize(),this.renderer&&this.renderer.resize(),this.world&&this.world.resize(),this.world&&this.world.resize()}},{key:"destroy",value:function(){}}])&&ye(t.prototype,n),i&&ye(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();xe=void 0,(we="instance")in(be=Pe)?Object.defineProperty(be,we,{value:xe,enumerable:!0,configurable:!0,writable:!0}):be[we]=xe;var ze,Se,_e=function(e){return document.querySelector(e)},ke=(new Pe({targetElement:document.querySelector(".experience")}),_e(".loader")),Oe=_e(".inner-loader"),Ee=(ze=".inner-loader h1 span",document.querySelectorAll(ze)),Ce=_e(".overlay");null===localStorage.getItem("first")&&(Se=i.p8.timeline(),i.p8.set(ke,{y:"0"}),i.p8.set(Oe,{opacity:1}),Se.to(Ee,1.2,{delay:5,rotation:1e3,y:"-100%",opacity:0,ease:"back",stagger:.2}),Se.to(ke,1.2,{y:"-100%",ease:r.Au.easeInOut}),localStorage.setItem("first","nope!")),window.addEventListener("load",(function(){i.p8.timeline().fromTo(Ce,1,{y:"0",ease:r.Au.easeInOut},{y:"-100%",ease:r.Au.easeInOut})}));for(var je=document.querySelectorAll(".transition-btn"),Fe=0;Fe<je.length;Fe++){je[Fe].addEventListener("click",(function(e){e.preventDefault();var t=e.target;"SPAN"===t.nodeName&&(t=t.parentElement.href),i.p8.timeline().to(Ce,1,{y:"0",ease:r.Au.easeInOut}),setTimeout((function(){window.location.href=t}),1100)}))}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,n,r,o)=>{if(!n){var s=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],a=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(i.O).every((e=>i.O[e](n[c])))?n.splice(c--,1):(a=!1,o<s&&(s=o));if(a){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={826:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[s,a,c]=n,l=0;if(s.some((t=>0!==e[t]))){for(r in a)i.o(a,r)&&(i.m[r]=a[r]);if(c)var u=c(i)}for(t&&t(n);l<s.length;l++)o=s[l],i.o(e,o)&&e[o]&&e[o][0](),e[s[l]]=0;return i.O(u)},n=self.webpackChunkwork_1=self.webpackChunkwork_1||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=i.O(void 0,[716,850],(()=>i(193)));r=i.O(r)})();
//# sourceMappingURL=index.4c74f661e7da982afceb.js.map